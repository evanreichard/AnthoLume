{{template "base.html" .}}

{{define "title"}}Documents{{end}}

{{define "header"}}
<a href="./documents">Documents</a>
{{end}}

{{define "content"}}
<div class="grid grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
  {{range $doc := .Data }}
  <div class="w-full relative">
    <div class="flex gap-4 w-full h-full p-4 bg-white shadow-lg dark:bg-gray-700 rounded">
      <div class="min-w-fit my-auto h-48 relative">
	<a href="./documents/{{$doc.ID}}">
	  <img class="rounded object-cover h-full" src="./documents/{{$doc.ID}}/cover"></img>
	</a>
      </div>
      <div class="flex flex-col justify-around dark:text-white w-full text-sm">
        <div class="inline-flex shrink-0 items-center">
          <div>
              <p class="text-gray-400">Title</p>
              <p class="font-medium">
                {{ or $doc.Title "Unknown" }}
              </p>
          </div>
        </div>
        <div class="inline-flex shrink-0 items-center">
          <div>
              <p class="text-gray-400">Author</p>
              <p class="font-medium">
                {{ or $doc.Author "Unknown" }}
              </p>
          </div>
        </div>
        <div class="inline-flex shrink-0 items-center">
          <div>
              <p class="text-gray-400">Progress</p>
              <p class="font-medium">
	      {{ $doc.Percentage }}%
              </p>
          </div>
        </div>
        <div class="inline-flex shrink-0 items-center">
          <div>
              <p class="text-gray-400">Time Read</p>
              <p class="font-medium">
	      {{ NiceSeconds $doc.TotalTimeSeconds }}
              </p>
          </div>
        </div>
      </div>
      <div class="absolute flex flex-col gap-2 right-4 bottom-4 text-gray-500 dark:text-gray-400">
	<a href="./activity?document={{ $doc.ID }}">
	  <svg
	    width="24"
	    height="24"
	    class="cursor-pointer hover:text-gray-800 dark:hover:text-gray-100"
	    viewBox="0 0 24 24"
	    fill="currentColor"
	    xmlns="http://www.w3.org/2000/svg"
	  >
	    <path d="M9.5 2C8.67157 2 8 2.67157 8 3.5V4.5C8 5.32843 8.67157 6 9.5 6H14.5C15.3284 6 16 5.32843 16 4.5V3.5C16 2.67157 15.3284 2 14.5 2H9.5Z"/>
	    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.5 4.03662C5.24209 4.10719 4.44798 4.30764 3.87868 4.87694C3 5.75562 3 7.16983 3 9.99826V15.9983C3 18.8267 3 20.2409 3.87868 21.1196C4.75736 21.9983 6.17157 21.9983 9 21.9983H15C17.8284 21.9983 19.2426 21.9983 20.1213 21.1196C21 20.2409 21 18.8267 21 15.9983V9.99826C21 7.16983 21 5.75562 20.1213 4.87694C19.552 4.30764 18.7579 4.10719 17.5 4.03662V4.5C17.5 6.15685 16.1569 7.5 14.5 7.5H9.5C7.84315 7.5 6.5 6.15685 6.5 4.5V4.03662ZM7 9.75C6.58579 9.75 6.25 10.0858 6.25 10.5C6.25 10.9142 6.58579 11.25 7 11.25H7.5C7.91421 11.25 8.25 10.9142 8.25 10.5C8.25 10.0858 7.91421 9.75 7.5 9.75H7ZM10.5 9.75C10.0858 9.75 9.75 10.0858 9.75 10.5C9.75 10.9142 10.0858 11.25 10.5 11.25H17C17.4142 11.25 17.75 10.9142 17.75 10.5C17.75 10.0858 17.4142 9.75 17 9.75H10.5ZM7 13.25C6.58579 13.25 6.25 13.5858 6.25 14C6.25 14.4142 6.58579 14.75 7 14.75H7.5C7.91421 14.75 8.25 14.4142 8.25 14C8.25 13.5858 7.91421 13.25 7.5 13.25H7ZM10.5 13.25C10.0858 13.25 9.75 13.5858 9.75 14C9.75 14.4142 10.0858 14.75 10.5 14.75H17C17.4142 14.75 17.75 14.4142 17.75 14C17.75 13.5858 17.4142 13.25 17 13.25H10.5ZM7 16.75C6.58579 16.75 6.25 17.0858 6.25 17.5C6.25 17.9142 6.58579 18.25 7 18.25H7.5C7.91421 18.25 8.25 17.9142 8.25 17.5C8.25 17.0858 7.91421 16.75 7.5 16.75H7ZM10.5 16.75C10.0858 16.75 9.75 17.0858 9.75 17.5C9.75 17.9142 10.0858 18.25 10.5 18.25H17C17.4142 18.25 17.75 17.9142 17.75 17.5C17.75 17.0858 17.4142 16.75 17 16.75H10.5Z"/>
	  </svg>
	</a>

	{{ if $doc.Filepath }}
	<a href="./documents/{{$doc.ID}}/file">
	  <svg
	    width="24"
	    height="24"
	    class="cursor-pointer hover:text-gray-800 dark:hover:text-gray-100"
	    viewBox="0 0 24 24"
	    fill="currentColor"
	    xmlns="http://www.w3.org/2000/svg"
	  >
	    <path
	      fill-rule="evenodd"
	      clip-rule="evenodd"
	      d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12ZM12 6.25C12.4142 6.25 12.75 6.58579 12.75 7V12.1893L14.4697 10.4697C14.7626 10.1768 15.2374 10.1768 15.5303 10.4697C15.8232 10.7626 15.8232 11.2374 15.5303 11.5303L12.5303 14.5303C12.3897 14.671 12.1989 14.75 12 14.75C11.8011 14.75 11.6103 14.671 11.4697 14.5303L8.46967 11.5303C8.17678 11.2374 8.17678 10.7626 8.46967 10.4697C8.76256 10.1768 9.23744 10.1768 9.53033 10.4697L11.25 12.1893V7C11.25 6.58579 11.5858 6.25 12 6.25ZM8 16.25C7.58579 16.25 7.25 16.5858 7.25 17C7.25 17.4142 7.58579 17.75 8 17.75H16C16.4142 17.75 16.75 17.4142 16.75 17C16.75 16.5858 16.4142 16.25 16 16.25H8Z"
	    />
	  </svg>
	</a>
	{{ else }}
	<svg
	  width="24"
	  height="24"
	  class="text-gray-200 dark:text-gray-600"
	  viewBox="0 0 24 24"
	  fill="currentColor"
	  xmlns="http://www.w3.org/2000/svg"
	>
	  <path
	    fill-rule="evenodd"
	    clip-rule="evenodd"
	    d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12ZM12 6.25C12.4142 6.25 12.75 6.58579 12.75 7V12.1893L14.4697 10.4697C14.7626 10.1768 15.2374 10.1768 15.5303 10.4697C15.8232 10.7626 15.8232 11.2374 15.5303 11.5303L12.5303 14.5303C12.3897 14.671 12.1989 14.75 12 14.75C11.8011 14.75 11.6103 14.671 11.4697 14.5303L8.46967 11.5303C8.17678 11.2374 8.17678 10.7626 8.46967 10.4697C8.76256 10.1768 9.23744 10.1768 9.53033 10.4697L11.25 12.1893V7C11.25 6.58579 11.5858 6.25 12 6.25ZM8 16.25C7.58579 16.25 7.25 16.5858 7.25 17C7.25 17.4142 7.58579 17.75 8 17.75H16C16.4142 17.75 16.75 17.4142 16.75 17C16.75 16.5858 16.4142 16.25 16 16.25H8Z"
	  />
	</svg>
	{{ end }}
      </div>
    </div>
  </div>
  {{end}}
</div>

<div class="fixed bottom-6 right-6 rounded-full flex items-center justify-center">
  <input type="checkbox" id="upload-file-button" class="hidden css-button"/>
  <div class="rounded p-4 bg-gray-800 dark:bg-gray-200 text-white dark:text-black w-72 text-sm flex flex-col gap-2">
    <form method="POST" enctype="multipart/form-data" action="./documents" class="flex flex-col gap-2">
      <input type="file" accept=".epub" id="document_file" name="document_file">
      <button class="font-medium px-2 py-1 text-gray-800 bg-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800" type="submit">Upload File</button>
    </form>
    <label for="upload-file-button">
      <div class="w-full text-center cursor-pointer font-medium mt-2 px-2 py-1 text-gray-800 bg-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800">Cancel Upload</div>
    </label>
  </div>
  <label
    class="w-16 h-16 bg-gray-800 dark:bg-gray-200 rounded-full flex items-center justify-center opacity-30 hover:opacity-100 transition-all duration-200 cursor-pointer"
    for="upload-file-button"
  >
    <svg
      width="34"
      height="34"
      class="text-gray-200 dark:text-gray-600"
      viewBox="0 0 24 24"
      fill="currentColor"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
	fill-rule="evenodd"
	clip-rule="evenodd"
	d="M12 15.75C12.4142 15.75 12.75 15.4142 12.75 15V4.02744L14.4306 5.98809C14.7001 6.30259 15.1736 6.33901 15.4881 6.06944C15.8026 5.79988 15.839 5.3264 15.5694 5.01191L12.5694 1.51191C12.427 1.34567 12.2189 1.25 12 1.25C11.7811 1.25 11.573 1.34567 11.4306 1.51191L8.43056 5.01191C8.16099 5.3264 8.19741 5.79988 8.51191 6.06944C8.8264 6.33901 9.29988 6.30259 9.56944 5.98809L11.25 4.02744L11.25 15C11.25 15.4142 11.5858 15.75 12 15.75Z"
      />
      <path
	d="M16 9C15.2978 9 14.9467 9 14.6945 9.16851C14.5853 9.24148 14.4915 9.33525 14.4186 9.44446C14.25 9.69667 14.25 10.0478 14.25 10.75L14.25 15C14.25 16.2426 13.2427 17.25 12 17.25C10.7574 17.25 9.75004 16.2426 9.75004 15L9.75004 10.75C9.75004 10.0478 9.75004 9.69664 9.58149 9.4444C9.50854 9.33523 9.41481 9.2415 9.30564 9.16855C9.05341 9 8.70227 9 8 9C5.17157 9 3.75736 9 2.87868 9.87868C2 10.7574 2 12.1714 2 14.9998V15.9998C2 18.8282 2 20.2424 2.87868 21.1211C3.75736 21.9998 5.17157 21.9998 8 21.9998H16C18.8284 21.9998 20.2426 21.9998 21.1213 21.1211C22 20.2424 22 18.8282 22 15.9998V14.9998C22 12.1714 22 10.7574 21.1213 9.87868C20.2426 9 18.8284 9 16 9Z"
      />
    </svg>
  </label>
</div>

<style>
  .css-button:checked + div {
    display: block;
    opacity: 1;
  }

  .css-button + div {
    display: none;
    opacity: 0;
  }

  .css-button:checked + div + label {
    display: none;
  }
</style>
{{end}}
